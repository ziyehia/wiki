<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Tutorial elec/pwm" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Quick guide to generate a PWM signal with an ST microcontroller | My Wiki</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://ziyehia.github.io/wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://ziyehia.github.io/wiki/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://ziyehia.github.io/wiki/docs/Tutorial elec/pwm"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Quick guide to generate a PWM signal with an ST microcontroller | My Wiki"><meta data-rh="true" name="description" content="What is it?"><meta data-rh="true" property="og:description" content="What is it?"><link data-rh="true" rel="icon" href="/wiki/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ziyehia.github.io/wiki/docs/Tutorial elec/pwm"><link data-rh="true" rel="alternate" href="https://ziyehia.github.io/wiki/docs/Tutorial elec/pwm" hreflang="en"><link data-rh="true" rel="alternate" href="https://ziyehia.github.io/wiki/docs/Tutorial elec/pwm" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorial - Electronics","item":"https://ziyehia.github.io/wiki/docs/category/tutorial---electronics"},{"@type":"ListItem","position":2,"name":"Quick guide to generate a PWM signal with an ST microcontroller","item":"https://ziyehia.github.io/wiki/docs/Tutorial elec/pwm"}]}</script><link rel="alternate" type="application/rss+xml" href="/wiki/blog/rss.xml" title="My Wiki RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/wiki/blog/atom.xml" title="My Wiki Atom Feed"><link rel="stylesheet" href="/wiki/assets/css/styles.9072f9ea.css">
<script src="/wiki/assets/js/runtime~main.58102e56.js" defer="defer"></script>
<script src="/wiki/assets/js/main.b7c2dfb0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/wiki/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/wiki/"><div class="navbar__logo"><img src="/wiki/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/wiki/img/logo.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">My Site</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/wiki/docs/intro">Tutorial</a><a class="navbar__item navbar__link" href="/wiki/blog">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/wiki/docs/intro"><span title="Introduction tutoriels" class="linkLabel_WmDU">Introduction tutoriels</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/wiki/docs/category/tutorial---electronics"><span title="Tutorial - Electronics" class="categoryLinkLabel_W154">Tutorial - Electronics</span></a><button aria-label="Collapse sidebar category &#x27;Tutorial - Electronics&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/docs/Tutorial elec/Timers"><span title="Les Timers" class="linkLabel_WmDU">Les Timers</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/wiki/docs/Tutorial elec/pwm"><span title="Quick guide to generate a PWM signal with an ST microcontroller" class="linkLabel_WmDU">Quick guide to generate a PWM signal with an ST microcontroller</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/docs/Tutorial elec/Liaisons"><span title="KiCad" class="linkLabel_WmDU">KiCad</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/docs/Tutorial elec/KiCad"><span title="Les diverses liaisons" class="linkLabel_WmDU">Les diverses liaisons</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/docs/Tutorial elec/Conso"><span title="Consommation énergitique" class="linkLabel_WmDU">Consommation énergitique</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/wiki/docs/Tutorial elec/Soudure"><span title="Soudure" class="linkLabel_WmDU">Soudure</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/docs/category/tutorial---basics"><span title="Tutorial - Basics" class="categoryLinkLabel_W154">Tutorial - Basics</span></a><button aria-label="Expand sidebar category &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/docs/category/tutorial---informatics"><span title="Tutorial - Informatics" class="categoryLinkLabel_W154">Tutorial - Informatics</span></a><button aria-label="Expand sidebar category &#x27;Tutorial - Informatics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/docs/category/tutorial---extras"><span title="Tutorial - Extras" class="categoryLinkLabel_W154">Tutorial - Extras</span></a><button aria-label="Expand sidebar category &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/docs/category/tutorial---mechanics"><span title="Tutorial - Mechanics" class="categoryLinkLabel_W154">Tutorial - Mechanics</span></a><button aria-label="Expand sidebar category &#x27;Tutorial - Mechanics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/docs/category/tutorial---robotics"><span title="Tutorial - Robotics" class="categoryLinkLabel_W154">Tutorial - Robotics</span></a><button aria-label="Expand sidebar category &#x27;Tutorial - Robotics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/wiki/docs/category/tutorial---others"><span title="Tutorial - Others" class="categoryLinkLabel_W154">Tutorial - Others</span></a><button aria-label="Expand sidebar category &#x27;Tutorial - Others&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/wiki/docs/ultrasonic"><span title="Guide to setup and use the ultrasonic sensor HC-SR04 with STM32CubeIDE" class="linkLabel_WmDU">Guide to setup and use the ultrasonic sensor HC-SR04 with STM32CubeIDE</span></a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/wiki/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/wiki/docs/category/tutorial---electronics"><span>Tutorial - Electronics</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Quick guide to generate a PWM signal with an ST microcontroller</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Quick guide to generate a PWM signal with an ST microcontroller</h1></header>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-it">What is it?<a href="#what-is-it" class="hash-link" aria-label="Direct link to What is it?" title="Direct link to What is it?" translate="no">​</a></h2>
<p>PWM stands for Pulse-width modulation, which is any method of representing a signal as a rectangular wave with a varying duty cycle. So a PWM signal is simply a rectengular wave with a varying duty cycle.
<img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/e6c0b612-0971-4af8-805d-ff192dba14d5" alt="PWM signals" class="img_ev3q"></p>
<p><em>Representation of a PWM signal with different duty cycles</em></p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="its-uses">Its uses<a href="#its-uses" class="hash-link" aria-label="Direct link to Its uses" title="Direct link to Its uses" translate="no">​</a></h2>
<p>PWM is mainly used to get <strong>analog like</strong> results with a digital signal, and by digital signal, we mean a signal that switches between two values :</p>
<ul>
<li class="">LOW which corresponds to 0 V</li>
<li class="">HIGH which corresponds to a positive value, commonly 3.3 V or 5 V for microcontrollers</li>
</ul>
<p>PWM is therefore useful for controlling the average power or or effective voltage delivered by an electrical signal. The higher the duty cycle is, the higher the average is. This is useful in applications like controlling LED brightness, DC motor speed, servo position, heating elements, and more.</p>
<p>The frequency of the signal is also important, it should be chosen correctly so that the electronic device is not negatively affected by the constant ON and OFF switching of the signal.</p>
<p>For example, if you use a PWM signal with a frequency of 10 Hz to control an LED’s brightness, the LED will appear to blink because the human eye can detect such slow flickering. However, if the frequency is increased to 1000 Hz or more, and the duty cycle is 50%, the LED will appear to emit a steady light at reduced brightness due to the eye&#x27;s persistence of vision.</p>
<p>On the other hand, a motor, being electromechanical, cannot react instantly to rapid changes in the signal, due to inductance and inertia, so when choosing a PWM signal with a high enough frequency, the motor effectively responds to the average power of the PWM signal, rather than each individual pulse.
Essentially, the frequency should be high enough so that the motor is not able to keep up with the signal fluctuations, otherwise there will be jitters in the movement.</p>
<p>These two examples were given to explain that we see similar results (smooth output) in different devices, but they&#x27;re due to different reasons, which is always good to keep in mind.</p>
<p>That being said, a frequency shouldn&#x27;t be too high for the component either to avoid possible power dissipation and heating problems.
Always refer to the component&#x27;s datasheet or technical specifications to have the correct frequency range.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="generating-a-pwm-signal-with-a-microcontroller">Generating a PWM signal with a microcontroller<a href="#generating-a-pwm-signal-with-a-microcontroller" class="hash-link" aria-label="Direct link to Generating a PWM signal with a microcontroller" title="Direct link to Generating a PWM signal with a microcontroller" translate="no">​</a></h2>
<p>For our example, we&#x27;ll be using STML476RG, but this method shouldn&#x27;t be very different across different ST microcontrollers.</p>
<p>PWM generation is pretty forward, it is done using timers, in our example, we chose the timer TIM5.
This timer can generate PWM signals in 4 channels, we&#x27;ll choose channel 2. Do not forget to check the internal clock box.</p>
<p>There are three main parameters affecting our signal, PSC and ARR to choose its frequency, and the Pulse parameter decides the value of the duty cycle.
Our main clock speed is at 80 MHz, we choose PSC = 79 and ARR = 999 to have a timer frequency of 1 kHz.</p>
<p>The Pulse value basically refers the number of timer counts the output stays HIGH within each PWM cycle, therefore, it should be chosen relatively to the ARR value.
For example, to have a 50% duty cycle, we set Pulse to 500.
<img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/ec644df9-ba5b-4053-a20b-3544f13db29e" alt="tim5 settings" class="img_ev3q"></p>
<p><em>Screenshot of the TIM5 configuration</em></p>
<p>As you can see in the parameters, there are different PWM modes to choose from, for a normal PWM signal, we choose Mode 1. It simply means that the output is HIGH when the timer counter is less than the Pulse value, and LOW when it&#x27;s equal or greater, so the signal starts by being HIGH then switches to LOW.</p>
<p>Now that the timer is set, we can configure different pins to recieve this signal. For example, we choose PA1 :
<img decoding="async" loading="lazy" src="https://github.com/user-attachments/assets/ca4feb94-6af9-4cad-93a8-8c0fe7aeaac9" alt="image" class="img_ev3q"></p>
<p>Save the ioc file so that the IDE apply your configuration. Now you just need to start TIM5 and its PWM generation in the main.c file, in the <code>main()</code> function, after the initializations (in the  /* USER CODE BEGIN 2 */ for our case).</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">HAL_TIM_Base_Start_IT</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">htim5</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">HAL_TIM_PWM_Start</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">htim5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TIM_CHANNEL_2</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><br></span></code></pre></div></div>
<p>If you want to change the ARR value (to control the frequency) or the Pulse value (to control the duty cycle) at any moment in the code, you can use the functions <code>__HAL_TIM_SET_AUTORELOAD(__HANDLE__, __AUTORELOAD__)</code> and <code>__HAL_TIM_SET_COMPARE(__HANDLE__, __CHANNEL__, __COMPARE__)</code>, in our case, the syntax would be :</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-c codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">__HAL_TIM_SET_AUTORELOAD</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">htim5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> new_arr</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain">               </span><span class="token comment" style="color:#999988;font-style:italic">//used to change the ARR value</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">__HAL_TIM_SET_COMPARE</span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain">htim5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> TIM_CHANNEL_2</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> new_pulse</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">//used to change the Pulse value</span><br></span></code></pre></div></div>
<p>And that&#x27;s it!</p>
<p>Now you can visualise this signal on an oscilloscope, or try to dynamically change the brightness of a LED if you want a first easy application.
Enjoy!</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href="https://github.com/ziyehia/wiki/tree/main/docs/docs/Tutorial elec/pwm.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/wiki/docs/Tutorial elec/Timers"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Les Timers</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/wiki/docs/Tutorial elec/Liaisons"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">KiCad</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-it" class="table-of-contents__link toc-highlight">What is it?</a></li><li><a href="#its-uses" class="table-of-contents__link toc-highlight">Its uses</a></li><li><a href="#generating-a-pwm-signal-with-a-microcontroller" class="table-of-contents__link toc-highlight">Generating a PWM signal with a microcontroller</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/wiki/docs/intro">Tutorial</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/wiki/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>